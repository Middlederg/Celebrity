@inject CategoriesQuery query
<div class="col-lg-12">

    <div class="d-flex justify-content-between align-items-center">
        <h3 class="my-1">
            Categories
        </h3>
    </div>

    <hr class="my-0" />

    <nav class="navbar navbar-expand-lg navbar-light bg-light p-0 mb-3">
        <div class="form-inline my-2 my-lg-0">
            <div class="input-group">
                <input class="form-control form-control-sm"
                       type="search"
                       placeholder="Search"
                       aria-label="Search"
                       aria-describedby="searchButton"
                       @bind="categories.SearchText">
                <div class="input-group-append">
                    <button class="btn btn-outline-secondary btn-sm my-2 my-sm-0" 
                            type="submit" 
                            id="searchButton"
                            @onclick="Search">
                        <span class="oi oi-magnifying-glass" title="search" aria-hidden="true"></span>
                    </button>
                </div>
            </div>
        </div>

        <button class="btn btn-light btn-sm ml-4" @onclick="SelectAll">
            select all categories
        </button>
        <button class="btn btn-light btn-sm ml-4"  @onclick="UnselectAll">
            unselect all categories
        </button>
    </nav>

</div>

@foreach (var category in categories.Categories.Where(x => x.Visible))
{
    <CategoryCard Category="category"></CategoryCard>
}

@code {

    private CategoriesViewModel categories;

    protected async override Task OnInitializedAsync()
    {
        var list = await query.Execute();
        categories = new CategoriesViewModel(list);
    }

    private void Search()
    {
        categories.Search();
  
    }

    private void SelectAll()
    {
        categories.SelectAll();

    }

    private void UnselectAll()
    {
        categories.UnselectAll();
    
    }
}
